<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Field Guide — Compromised Feedback Loop (Full Screen)</title>
  <link rel="stylesheet" href="/assets/css/site.css">
  <link rel="icon" href="/assets/knoxramsey_logo.jpeg" type="image/jpeg">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="Full-screen diagram: Compromised feedback loop across cloud, site, and edge."/>
  <style>
    :root{--bg:#071014;--panel:#0c151a;--ink:#e8eef5;--muted:#9fb2c7;--accent:#52ffa8;--line:#17313d}
    *{box-sizing:border-box} html,body{margin:0}
    body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.7}
    a{color:var(--accent);text-decoration:none}
    .nav{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,#0e1820,#0a1318);border-bottom:1px solid var(--line)}
    .wrap{max-width:1400px;margin:0 auto;padding:16px 18px}
    .bar{display:flex;gap:14px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{font-weight:900;letter-spacing:.3px}
    .links{display:flex;gap:14px;flex-wrap:wrap}
    .links a{color:var(--muted);font-weight:700}
    .links a:hover{color:var(--accent)}

    .binder{display:grid;grid-template-columns:280px 1fr;gap:24px;max-width:1400px;margin:0 auto;padding:24px 18px}
    .sidebar{position:sticky;top:80px;height:fit-content;background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:20px;box-shadow:2px 0 12px rgba(0,0,0,0.3)}
    .sidebar h2{margin:0 0 16px 0;font-size:1.1rem;color:var(--accent);border-bottom:2px solid var(--accent);padding-bottom:8px}
    .sidebar nav a{display:block;padding:10px 12px;border-radius:6px;color:var(--muted);font-weight:600;border-left:3px solid transparent}
    .sidebar nav a:hover{background:rgba(82,255,168,0.06);color:var(--accent);border-left-color:var(--accent)}

    .content{min-width:0}
    .figure{background:var(--panel);border:1px solid var(--line);border-radius:12px;margin-bottom:18px;overflow:hidden}
    .figure header{padding:12px 16px;border-bottom:1px solid var(--line);font-weight:700}
    .mermaid{padding:12px}
    .hint{color:var(--muted);font-size:0.85rem;text-align:center;padding:8px 0 12px}
    @media (max-width:900px){.binder{grid-template-columns:1fr;gap:16px}.sidebar{position:relative;top:0}}
  </style>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({
      startOnLoad:true,
      theme:"base",
      securityLevel:"loose",
      flowchart:{useMaxWidth:true,htmlLabels:true,curve:"linear",nodeSpacing:50,rankSpacing:70,padding:8},
      themeVariables:{
        background:"#0d171c",
        lineColor:"#52ffa8",
        textColor:"#e8eef5",
        fontSize:"16px",
        fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
  <script>
    function enablePanZoom(scope=document){
      scope.querySelectorAll('.mermaid svg').forEach(svg=>{
        if(svg.dataset.pz) return;
        const pz = svgPanZoom(svg,{zoomEnabled:true,fit:true,center:true,minZoom:0.3,maxZoom:16});
        svg.dataset.pz='1';
        svg.style.cursor='grab';
        svg.addEventListener('mousedown',()=>svg.style.cursor='grabbing');
        svg.addEventListener('mouseup',()=>svg.style.cursor='grab');
      });
    }
    const obs=new MutationObserver(()=>enablePanZoom());
    obs.observe(document.documentElement,{childList:true,subtree:true});
    document.addEventListener('DOMContentLoaded',enablePanZoom);
  </script>
</head>
<body>
  <nav class="nav" aria-label="Primary">
    <div class="wrap bar">
      <div class="brand"><img class="brand-logo" src="/assets/knoxramsey_logo.jpeg" alt="Knox Ramsey Thrillers logo" width="112" height="28" loading="lazy" decoding="async"/>Knox Ramsey Thrillers</div>
      <div class="links">
        <a href="/">Home</a>
        <a href="/fieldguide/">Field Guide</a>
        <a href="/darkrecipe/">Dark Recipe</a>
        <a href="/about.html">About</a>
      </div>
    </div>
  </nav>

  <div class="binder">
    <aside class="sidebar">
      <h2>Field Guide</h2>
      <div class="search">
        <input type="search" placeholder="Search..." aria-label="Search Field Guide">
      </div>
      <nav aria-label="Field Guide sections">
        <a href="/fieldguide/">Overview</a>
        <a href="/fieldguide/timeline.html">Geneva Timeline</a>
        <a href="/fieldguide/biology/">Plant Biology</a>
        <a href="/fieldguide/intelligence/">Intelligence</a>
        <a href="/fieldguide/systems/" class="active">Systems</a>
        <a href="/fieldguide/systems/dashboard.html">Dashboard</a>
        <a href="/fieldguide/threats/">Threats</a>
        <a href="/fieldguide/stuxnet/">Stuxnet Case File</a>
        <a href="/fieldguide/dramatis-personae/">Dramatis Personae</a>
        <a href="/fieldguide/locations/">Key Locations</a>
        <a href="/fieldguide/us-structure/">US Inter-Agency</a>
        <a href="/fieldguide/glossary/">Glossary</a>
      </nav>
    </aside>

    <main class="content">
      <h1>Compromised Feedback Loop — Full Screen</h1>
      <div class="figure">
        <header>Compromised Feedback Loop</header>
        <div class="mermaid">
flowchart TB
  subgraph CLOUD[FarmLytics Cloud]
    ING[Ingestion]
    ML[Model Train and Serve]
    PKI[Compromised CA - spoofed certs]
  end
  subgraph SITE[Site Gateway]
    GW[Gateway]
    LOG[Immutable Log]
  end
  subgraph EDGE[Edge - FarmCore]
    SK[Safety Kernel v1]
    ACT[Actuators - LEDs and Nutrients]
    SENS[Sensors]
  end
  SENS --> GW
  GW --> ING
  ING --> ML
  ML -->|poisoned recipe| GW
  PKI -.->|false trust| GW
  GW --> SK
  SK -->|shadow test passed - spoofed| ACT
  ACT -->|environment change| SENS
  SK --> LOG
  GW --> LOG
  ING --> LOG

  %% Styles
  classDef edge fill:#12313d,stroke:#52ffa8,color:#e8eef5;
  classDef site fill:#1a2430,stroke:#52ffa8,color:#e8eef5;
  classDef cloud fill:#2b2016,stroke:#ffb35a,color:#e8eef5;
  class SENS,SK,ACT edge;
  class GW,LOG site;
  class ING,ML,PKI cloud;

  %% Exploit path highlight
  linkStyle 7 stroke:#ff4b3e,stroke-width:2px
  linkStyle 8 stroke-dasharray:3 3,stroke:#ff4b3e
  linkStyle 9 stroke:#ff4b3e,stroke-width:2px
  linkStyle 10 stroke:#ff4b3e,stroke-width:2px
        </div>
        <div class="hint">Tip: Scroll to zoom · Drag to pan</div>
      </div>
    </main>
  </div>
  <script src="/assets/js/fieldguide.js"></script>
</body>
</html>
