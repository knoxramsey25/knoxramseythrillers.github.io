<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Field Guide — Systems &amp; Control</title>
  <link rel="stylesheet" href="/assets/css/site.css">
  <link rel="icon" href="/assets/knoxramsey_logo.jpeg" type="image/jpeg">
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="FarmCore ↔ FarmLytics architecture, safety kernel, compromised feedback loop, and HMI dashboard."/>
  <style>
    :root{--bg:#071014;--panel:#0c151a;--ink:#e8eef5;--muted:#9fb2c7;--accent:#52ffa8;--line:#17313d}
    *{box-sizing:border-box} html,body{margin:0}
    body{background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.7}
    a{color:var(--accent);text-decoration:none}
    .nav{position:sticky;top:0;z-index:50;background:linear-gradient(180deg,#0e1820,#0a1318);border-bottom:1px solid var(--line)}
    .wrap{max-width:1400px;margin:0 auto;padding:16px 18px}
    .bar{display:flex;gap:14px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .brand{font-weight:900;letter-spacing:.3px}
    .links{display:flex;gap:14px;flex-wrap:wrap}
    .links a{color:var(--muted);font-weight:700}
    .links a:hover{color:var(--accent)}
    main.wrap{padding:28px 18px}
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:20px;margin-bottom:18px}
    .figure{background:var(--panel);border:1px solid var(--line);border-radius:12px;margin-bottom:18px;overflow:hidden}
    .figure header{padding:12px 16px;border-bottom:1px solid var(--line);font-weight:700}
    .mermaid{padding:16px}
    .muted{color:var(--muted)}
    .btn{display:inline-block;border:1px solid var(--accent);border-radius:8px;padding:10px 14px;margin-top:8px;font-weight:700}
    .btn:hover{background:rgba(82,255,168,0.1)}
    
    /* Binder Layout: Sidebar + Content */
    .binder{display:grid;grid-template-columns:280px 1fr;gap:24px;max-width:1400px;margin:0 auto;padding:24px 18px}
    
    /* Sidebar - The "Trapper Keeper" tabs */
    .sidebar{position:sticky;top:80px;height:fit-content;background:var(--panel);border:1px solid var(--line);border-radius:12px;padding:20px;box-shadow:2px 0 12px rgba(0,0,0,0.3)}
    .sidebar h2{margin:0 0 16px 0;font-size:1.1rem;color:var(--accent);border-bottom:2px solid var(--accent);padding-bottom:8px}
    .sidebar nav{display:flex;flex-direction:column;gap:4px}
    .sidebar nav a{display:block;padding:10px 12px;border-radius:6px;color:var(--muted);font-weight:600;border-left:3px solid transparent;transition:all 0.2s}
    .sidebar nav a:hover{background:rgba(82,255,168,0.06);color:var(--accent);border-left-color:var(--accent)}
    .sidebar nav a.active{background:linear-gradient(90deg,rgba(82,255,168,0.08),transparent);color:var(--accent);border-left-color:var(--accent);font-weight:800}
    
    /* Search in sidebar */
    .sidebar .search{margin-bottom:20px}
    .sidebar .search input{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--line);background:rgba(255,255,255,0.02);color:var(--ink);font-size:0.95rem}
    .sidebar .search input:focus{outline:2px solid var(--accent);background:rgba(255,255,255,0.04)}
    
    /* Content area */
    .content{min-width:0}
    
    /* Attack Summary Stepper (mobile-first) */
    .attack-stepper{position:relative;margin:18px 0 28px 0}
    .attack-stepper ol{list-style:none;margin:0;padding:0}
    .attack-stepper li{display:grid;grid-template-columns:28px 1fr;gap:12px;align-items:start;padding:12px 10px;border:1px solid var(--line);border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:10px}
    .attack-stepper .rail{grid-row:1 / span 2;align-self:stretch;position:relative}
    .attack-stepper .rail::before{content:"";position:absolute;left:13px;top:0;bottom:0;width:2px;background:linear-gradient(var(--line), transparent)}
    .attack-stepper .dot{position:relative;width:18px;height:18px;border-radius:50%;border:2px solid var(--line);background:var(--panel);margin-top:2px;box-shadow:0 0 0 3px rgba(0,0,0,0.15)}
    .attack-stepper .hdr{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    .attack-stepper .step{display:inline-flex;align-items:center;justify-content:center;width:26px;height:26px;border-radius:6px;border:1px solid var(--line);font-weight:800;font-size:0.85rem;background:rgba(255,255,255,0.03)}
    .attack-stepper .title{font-weight:800;color:#fff}
    .attack-stepper .desc{color:var(--muted);margin-top:6px}
    .attack-stepper .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:0.75rem;font-weight:700;border:1px solid rgba(255,255,255,0.15)}
    .as-boundary .dot{background:#ffd4a3;border-color:#ff9d4d}
    .as-inject   .dot{background:#ffb3b3;border-color:#ff6666}
    .as-recipe   .dot{background:#d4b3ff;border-color:#9966ff}
    .as-telemetry.dot{background:#ff9999;border-color:#ff4444}
    .as-mitigate .dot{background:#6fffb8;border-color:#32d296}
    @media (min-width:900px){.attack-stepper li{grid-template-columns:32px 1fr;padding:14px 12px}.attack-stepper .dot{width:20px;height:20px}}
    
    /* Mobile: Stack sidebar on top */
    @media (max-width:900px){
      .binder{grid-template-columns:1fr;gap:16px}
      .sidebar{position:relative;top:0}
    }
  </style>
  <script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
    mermaid.initialize({
      startOnLoad:true,
      theme:"base",
      securityLevel:"loose",
      flowchart:{useMaxWidth:true,htmlLabels:true,curve:"linear"},
      themeVariables:{
        background:"#0d171c",
        fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif",
        fontSize:"16px",
        lineColor:"#52ffa8",
        textColor:"#e8eef5",
        primaryColor:"#12313d",
        primaryBorderColor:"#52ffa8",
        primaryTextColor:"#e8eef5",
        secondaryColor:"#12313d",
        secondaryBorderColor:"#52ffa8",
        secondaryTextColor:"#e8eef5",
        tertiaryColor:"#12313d",
        tertiaryBorderColor:"#52ffa8",
        tertiaryTextColor:"#e8eef5"
      }
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
  <script>
    function enablePanZoom(scope=document){
      scope.querySelectorAll('.mermaid svg').forEach(svg=>{
        if(svg.dataset.pz) return;
        const pz = svgPanZoom(svg,{zoomEnabled:true,fit:true,center:true,minZoom:0.3,maxZoom:16});
        svg.dataset.pz='1';
        svg.style.cursor='grab';
        svg.addEventListener('mousedown',()=>svg.style.cursor='grabbing');
        svg.addEventListener('mouseup',()=>svg.style.cursor='grab');
      });
    }
    const observer=new MutationObserver(()=>enablePanZoom());
    observer.observe(document.documentElement,{childList:true,subtree:true});
    document.addEventListener('DOMContentLoaded',enablePanZoom);
  </script>
</head>
<body>
  <nav class="nav" aria-label="Primary">
    <div class="wrap bar">
  <div class="brand"><img class="brand-logo" src="/assets/knoxramsey_logo.jpeg" alt="Knox Ramsey Thrillers logo" width="112" height="28" loading="lazy" decoding="async"/>Knox Ramsey Thrillers</div>
      <div class="links">
        <a href="/">Home</a>
        <a href="/fieldguide/">Field Guide</a>
        <a href="/darkrecipe/">Dark Recipe</a>
        <a href="/about.html">About</a>
      </div>
    </div>
  </nav>

  <div class="binder">
    <aside class="sidebar">
      <h2>Field Guide</h2>
      <div class="search">
        <input type="search" placeholder="Search..." aria-label="Search Field Guide">
      </div>
      <nav aria-label="Field Guide sections">
        <a href="/fieldguide/">Overview</a>
        <a href="/fieldguide/timeline.html">Geneva Timeline</a>
        <a href="/fieldguide/biology/">Plant Biology</a>
        <a href="/fieldguide/intelligence/">Intelligence</a>
        <a href="/fieldguide/systems/" class="active">Systems</a>
        <a href="/fieldguide/systems/dashboard.html">Dashboard</a>
        <a href="/fieldguide/threats/">Threats</a>
        <a href="/fieldguide/stuxnet/">Stuxnet Case File</a>
        <a href="/fieldguide/dramatis-personae/">Dramatis Personae</a>
        <a href="/fieldguide/locations/">Key Locations</a>
        <a href="/fieldguide/us-structure/">US Inter-Agency</a>
        <a href="/fieldguide/glossary/">Glossary</a>
      </nav>
    </aside>

    <main class="content">

    <h1>Systems &amp; Control</h1>
    <section id="systems-intro" style="max-width:760px;margin:2rem auto 1rem auto;padding:0 1rem;color:#e0e0e0;font-family:'Georgia',serif;line-height:1.7;">
      <h1 style="color:#fff;margin:0 0 0.5rem 0;font-weight:600;font-size:1.6rem;">Systems &amp; Control</h1>
      <p>
        Precision agriculture is an act of faith—trusting data, sensors, and algorithms to act as extensions of human intent.
        <em>FarmCore</em> and <em>FarmLytics</em> were designed for efficiency, not exploitation. What follows illustrates how their interaction should have worked—until trust itself became the point of attack.
      </p>
      <p>
        These diagrams are reconstructions, not warnings. They show the hinge where design met assumption.
      </p>
    </section>

    <section class="panel" style="margin-top:0">
      <h2 style="margin-top:0">Attack Summary (System View)</h2>
      <section class="attack-stepper" aria-label="Compact attack summary">
        <ol>
          <li class="as-boundary">
            <div class="rail"><span class="dot" aria-hidden="true"></span></div>
            <div>
              <div class="hdr">
                <span class="step">1</span>
                <span class="title">Trust Boundary — Cloud → Site → Edge</span>
                <span class="badge">Boundary</span>
              </div>
              <div class="desc">Certificates and policies anchor trust across FarmLytics, Gateway, and FarmCore.</div>
            </div>
          </li>
          <li class="as-inject">
            <div class="rail"><span class="dot" aria-hidden="true"></span></div>
            <div>
              <div class="hdr">
                <span class="step">2</span>
                <a class="title" href="/fieldguide/threats/">Policy / Model Injection</a>
                <span class="badge">Injection</span>
              </div>
              <div class="desc">Poisoned weights and spoofed certs traverse the update and trust channels.</div>
            </div>
          </li>
          <li class="as-recipe">
            <div class="rail"><span class="dot" aria-hidden="true"></span></div>
            <div>
              <div class="hdr">
                <span class="step">3</span>
                <span class="title">Recipe Override at Gateway</span>
                <span class="badge">Control</span>
              </div>
              <div class="desc">Gateway relays “optimized” recipes; FarmCore shadow test passes under spoofing.</div>
            </div>
          </li>
          <li class="as-telemetry">
            <div class="rail"><span class="dot" aria-hidden="true"></span></div>
            <div>
              <div class="hdr">
                <span class="step">4</span>
                <a class="title" href="/fieldguide/systems/dashboard.html">Telemetry Spoofing</a>
                <span class="badge">HMI</span>
              </div>
              <div class="desc">Operators see healthy signals while actuators drive plant stress.</div>
            </div>
          </li>
          <li class="as-mitigate">
            <div class="rail"><span class="dot" aria-hidden="true"></span></div>
            <div>
              <div class="hdr">
                <span class="step">5</span>
                <a class="title" href="/fieldguide/systems/">Safety Kernel v2</a>
                <span class="badge">Mitigation</span>
              </div>
              <div class="desc">Dual‑channel physics checks and local policy verification harden the edge.</div>
            </div>
          </li>
        </ol>
      </section>
    </section>

    <figure class="figure">
      <header>FarmCore ↔ FarmLytics Overview</header>
      <div class="mermaid">
flowchart LR
  %% Edge
  subgraph E[Edge - Greenhouse or Grow Room]
    SENS[Sensor Array - Temp RH CO2 PAR PPFD pH EC]
    ACT[Actuators - LED arrays Pumps HVAC Fans]
    SK[FarmCore Safety Kernel - local limits and simulation]
  end

  %% Site
  subgraph SITE[Site Layer]
    GWS[Site Gateway - data buffer and time sync]
    LOG[Immutable Log - signed entries]
  end

  %% Cloud
  subgraph CLOUD[Cloud - FarmLytics]
    ING[Ingestion and Storage]
    ML[Models and Optimization - recipe generator]
    CA[Certificate and Policy Service]
  end

  %% Flows
  SENS --> GWS
  GWS --> ING
  ING --> ML
  ML -->|proposed recipe| GWS
  GWS --> SK
  SK -->|shadow test and verify| ACT
  CA -.->|mutual TLS and certs| GWS
  CA -.->|policy updates| SK
  SK --> LOG
  GWS --> LOG
  ING --> LOG

  %% Styles
  classDef edge fill:#12313d,stroke:#52ffa8,color:#e8eef5;
  classDef site fill:#1a2430,stroke:#52ffa8,color:#e8eef5;
  classDef cloud fill:#2b2016,stroke:#ffb35a,color:#e8eef5;
  class SENS,ACT,SK edge;
  class GWS,LOG site;
  class ING,ML,CA cloud;
      </div>
    </figure>

    <figure class="figure">
      <header>Compromised Feedback Loop</header>
      <div class="mermaid">
flowchart TB
  subgraph CLOUD[FarmLytics Cloud]
    ING[Ingestion]
    ML[Model Train and Serve]
    PKI[Compromised CA - spoofed certs]
  end
  subgraph SITE[Site Gateway]
    GW[Gateway]
    LOG[Immutable Log]
  end
  subgraph EDGE[Edge - FarmCore]
    SK[Safety Kernel v1]
    ACT[Actuators - LEDs and Nutrients]
    SENS[Sensors]
  end
  SENS --> GW
  GW --> ING
  ING --> ML
  ML -->|poisoned recipe| GW
  PKI -.->|false trust| GW
  GW --> SK
  SK -->|shadow test passed - spoofed| ACT
  ACT -->|environment change| SENS
  SK --> LOG
  GW --> LOG
  ING --> LOG

  %% Styles
  classDef edge fill:#12313d,stroke:#52ffa8,color:#e8eef5;
  classDef site fill:#1a2430,stroke:#52ffa8,color:#e8eef5;
  classDef cloud fill:#2b2016,stroke:#ffb35a,color:#e8eef5;
  class SENS,SK,ACT edge;
  class GW,LOG site;
  class ING,ML,PKI cloud;

  %% Exploit path highlight
  linkStyle 7 stroke:#ff4b3e,stroke-width:2px
  linkStyle 8 stroke-dasharray:3 3,stroke:#ff4b3e
  linkStyle 9 stroke:#ff4b3e,stroke-width:2px
  linkStyle 10 stroke:#ff4b3e,stroke-width:2px
      </div>
    </figure>

    <section class="panel">
      <h2>HMI / CEA Recipe Dashboard</h2>
      <p class="muted">Reconstructed interface view. Simulated data for educational context.</p>
      <p><a class="btn" href="/fieldguide/systems/dashboard.html">Launch the dashboard →</a></p>
    </section>
    
    <section id="stuxnet-context" style="max-width:760px;margin:3rem auto;padding:1rem 1.5rem;border-left:3px solid #900;background:#111;border-radius:6px;">
      <h2 style="color:#fff;">Case Study — Stuxnet</h2>
      <p>
        In 2010, a piece of code slipped through the world’s air gaps and rewrote how we think about control. 
        <strong>Stuxnet</strong> targeted Siemens industrial controllers at Iran’s Natanz facility, quietly varying centrifuge speeds while feeding normal data back to operators. 
        It was the first malware to cause physical destruction—proof that software could move steel.
      </p>
      <p>
        To engineers, it was a revelation of possibility and responsibility. The systems behind <em>Dark Recipe</em> draw their lineage from that moment: a world where process automation and statecraft share the same syntax.
      </p>
      <blockquote style="border-left:3px solid #900;padding-left:1rem;color:#ccc;font-style:italic;margin-top:1.5rem;">
        “We built it to keep the peace. We just forgot to teach it what peace meant.”
      </blockquote>
    </section>

    <section id="related" style="max-width:760px;margin:2rem auto;text-align:center;">
      <p style="color:#999;font-size:0.9rem;">See also:</p>
      <a href="/fieldguide/intelligence/" style="color:#52ffa8;text-decoration:none;margin:0 0.5rem;">Intelligence Context</a> •
      <a href="/fieldguide/stuxnet/" style="color:#52ffa8;text-decoration:none;margin:0 0.5rem;">Stuxnet Case File</a> •
      <a href="/fieldguide/threats/" style="color:#52ffa8;text-decoration:none;margin:0 0.5rem;">Threats Overview</a>
    </section>
  
    </main>
  </div>
  <script src="/assets/js/fieldguide.js"></script>
</body>
</html>
